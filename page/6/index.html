<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="不知乘月几人归，落月摇情满江树。">
<meta property="og:type" content="website">
<meta property="og:title" content="青枫浦">
<meta property="og:url" content="http://post.zz173.com/page/6/index.html">
<meta property="og:site_name" content="青枫浦">
<meta property="og:description" content="不知乘月几人归，落月摇情满江树。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="青枫浦">
<meta name="twitter:description" content="不知乘月几人归，落月摇情满江树。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 2664337,
      author: '<i class="fa fa-vimeo"></i>'
    }
  };
</script>

  <title> 青枫浦 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">青枫浦</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">落月博客post.zz173.com</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/index.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/index.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/index.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/index.html" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup">
 <span class="search-icon fa fa-search"></span>
 <input type="text" id="local-search-input">
 <div id="local-search-result"></div>
 <span class="popup-btn-close">close</span>
</div>


    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/detail/e7-81-ab-e7-8b-90-e6-b5-8f-e8-a7-88-e5-99-a8-e8-b0-b7-e6-ad-8c-e6-b5-8f-e8-a7-88-e5-99-a8-e6-97-a0-e6-b3-95-e7-9c-8b-e4-bc-98-e9-85-b7-e8-a7-86-e9-a2-91-e7-9a-84-e8-a7-a3-e5-86-b3-e6-96-b9-e6-a1-88.html" itemprop="url">
                  火狐浏览器、谷歌浏览器无法看优酷视频的解决方案
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-11-11T09:18:59+08:00" content="2013-11-11">
              2013-11-11
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/设计/" itemprop="url" rel="index">
                    <span itemprop="name">设计</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/detail/e7-81-ab-e7-8b-90-e6-b5-8f-e8-a7-88-e5-99-a8-e8-b0-b7-e6-ad-8c-e6-b5-8f-e8-a7-88-e5-99-a8-e6-97-a0-e6-b3-95-e7-9c-8b-e4-bc-98-e9-85-b7-e8-a7-86-e9-a2-91-e7-9a-84-e8-a7-a3-e5-86-b3-e6-96-b9-e6-a1-88.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>很久之前，我的电脑(win7 x64)无法看不了优酷了，而其他的flash显示完全正常，这让我感觉无比的心酸和蛋疼，因为在那期间，我刚好在好友的攒托下想搞优酷解说。可想而知这个打击对我来说是多么的巨大和令人心碎。</p>
<p>好在我混迹IT界七八年，这点小麻烦还是难不到我的。我果断打开浏览器，熟练的输入百度，精确的搜索到了解决方案，其说法五花八门如：关闭油猴子、更改DNS、更改hosts文件、重装浏览器、重装flash插件、甚至说重装系统的都有。但不用我说你们也知道，肯定答案不一而是，否则，我也不会写这篇博文了。</p>
<p>一个本来我以为很简单的问题，解决起来却并不如我想象中容易。网上无资料的情况下，我就只好自己开始思考解决方案了。而实际上，这些年百度确实让我变得更加懒惰了。</p>
<p>为什么单单优酷看不了呢？我初步想想是网络通信的原因，但我仔细检查了所有的通信以及DNS等，均无异常。那么我又开始怀疑是flash的原因，flash为什么单单优酷不正常呢？我分析是可能优酷使用了某个高级的函数或者功能导致flash不能正确的响应。但flash我已经重装了很多次，更换了不同的版本，仍然无用。</p>
<p>问题已经陷入了僵局，无奈之下只有先行放下，下载个优酷客户端先用着。</p>
<p>两个月后，当我已经快要忘记这个问题的时候，突然一个同事提起了360的沙盒模式，这让我灵光一现，突然想起了flash新版正在测试一个功能–沙盒模式，又称保护模式，是否是它影响到了优酷的正常相应呢？下班回到家后我决定尝试一下。在C:\WINDOWS\system32\Macromed\Flash我找到了mms.cfg，（<span style="color: #ff0000;">注意：如果你是64位的操作系统的话，应该是C:\WINDOWS\system64\Macromed\Flash</span>）。</p>
<p>
  <a href="http://blogx-wordpress.stor.sinaapp.com/uploads/2013/11/11.jpg" target="_blank" rel="external"><img src="http://blogx-wordpress.stor.sinaapp.com/uploads/2013/11/11.jpg" alt="" title="1"></a>
</p>
<p>然后在下面加上了一句</p>
<p>`</p>
<p>#关闭安全沙箱模式<br>ProtectedMode=0<br>`</p>
<p><img src="data:image/png;base64,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" alt=""></p>
<p>然后重启电脑，神奇的事情发生了。</p>
<p>本文发表自 <a href="http://post.zz173.com/detail/e7-81-ab-e7-8b-90-e6-b5-8f-e8-a7-88-e5-99-a8-e8-b0-b7-e6-ad-8c-e6-b5-8f-e8-a7-88-e5-99-a8-e6-97-a0-e6-b3-95-e7-9c-8b-e4-bc-98-e9-85-b7-e8-a7-86-e9-a2-91-e7-9a-84-e8-a7-a3-e5-86-b3-e6-96-b9-e6-a1-88.html">http://post.zz173.com/detail/e7-81-ab-e7-8b-90-e6-b5-8f-e8-a7-88-e5-99-a8-e8-b0-b7-e6-ad-8c-e6-b5-8f-e8-a7-88-e5-99-a8-e6-97-a0-e6-b3-95-e7-9c-8b-e4-bc-98-e9-85-b7-e8-a7-86-e9-a2-91-e7-9a-84-e8-a7-a3-e5-86-b3-e6-96-b9-e6-a1-88.html</a>  未经本人同意，禁止转载。</p>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/detail/e5-8f-91-e5-b8-83css-e5-bf-ab-e9-80-9f-e5-85-a5-e9-97-a8-e6-95-99-e7-a8-8b.html" itemprop="url">
                  发布CSS快速入门教程
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-11-08T10:56:33+08:00" content="2013-11-08">
              2013-11-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/设计/" itemprop="url" rel="index">
                    <span itemprop="name">设计</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/detail/e5-8f-91-e5-b8-83css-e5-bf-ab-e9-80-9f-e5-85-a5-e9-97-a8-e6-95-99-e7-a8-8b.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>发布CSS快速入门教程</p>
<p>本文发表自 <a href="http://post.zz173.com/detail/e5-8f-91-e5-b8-83css-e5-bf-ab-e9-80-9f-e5-85-a5-e9-97-a8-e6-95-99-e7-a8-8b.html">http://post.zz173.com/detail/e5-8f-91-e5-b8-83css-e5-bf-ab-e9-80-9f-e5-85-a5-e9-97-a8-e6-95-99-e7-a8-8b.html</a> 未经本人同意，禁止转载。</p>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/detail/e7-bd-91-e7-ab-99-e8-ae-bf-e9-97-ae-e5-8f-91-e7-94-9f-e5-bc-82-e5-b8-b8-e7-9a-84-e8-a7-a3-e5-86-b3-e6-96-b9-e6-a1-88-e3-80-82.html" itemprop="url">
                  网站访问发生异常的解决方案。
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-11-07T15:12:51+08:00" content="2013-11-07">
              2013-11-07
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/设计/" itemprop="url" rel="index">
                    <span itemprop="name">设计</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/detail/e7-bd-91-e7-ab-99-e8-ae-bf-e9-97-ae-e5-8f-91-e7-94-9f-e5-bc-82-e5-b8-b8-e7-9a-84-e8-a7-a3-e5-86-b3-e6-96-b9-e6-a1-88-e3-80-82.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>网站访问异常的大部分原因是因为缓存和Cookies需要清理，而这一系列问题中要数360浏览器最多，因此，本文以360浏览器为例讲诉如何清理缓存。</p>
<p>如下图所示：</p>
<p>首先要点击工具–清除上网痕迹，或者直接按Ctrl+Shift+Delete.</p>
<p>
  <a href="http://blogx-wordpress.stor.sinaapp.com/uploads/2013/11/1.jpg" target="_blank" rel="external"><img src="http://blogx-wordpress.stor.sinaapp.com/uploads/2013/11/1.jpg" alt="" title="1"></a>
</p>
<p>出现如下界面：</p>
<p>很重要的一步是一定要选择清除这个时间的数据为：全部，否则很慢定位到错误发生的时间。</p>
<p>接下来其他选项，如浏览历史记录等，仅存储了相关信息，不会影响到网站。这里我们只需要勾选“浏览器缓存的临时文件”和“Cookies和其他网站数据“就可以了。</p>
<p>
  <a href="http://blogx-wordpress.stor.sinaapp.com/uploads/2013/11/2.jpg" target="_blank" rel="external"><img src="http://blogx-wordpress.stor.sinaapp.com/uploads/2013/11/2.jpg" alt="" title="2"></a>
</p>
<p>&nbsp;</p>
<p>有一点需要说明的是，改完之后需要重新启动下浏览器。</p>
<p>怎么样，是不是困扰已久的问题得到了解决？</p>
<p>本文发表自 <a href="http://post.zz173.com/detail/e7-bd-91-e7-ab-99-e8-ae-bf-e9-97-ae-e5-8f-91-e7-94-9f-e5-bc-82-e5-b8-b8-e7-9a-84-e8-a7-a3-e5-86-b3-e6-96-b9-e6-a1-88-e3-80-82.html">http://post.zz173.com/detail/e7-bd-91-e7-ab-99-e8-ae-bf-e9-97-ae-e5-8f-91-e7-94-9f-e5-bc-82-e5-b8-b8-e7-9a-84-e8-a7-a3-e5-86-b3-e6-96-b9-e6-a1-88-e3-80-82.html</a>  未经本人同意，禁止转载。</p>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/detail/d-link-e8-b7-af-e7-94-b1-e5-99-a8-e4-b8-87-e8-83-bd-e5-af-86-e7-a0-81-ef-bc-8cd-link-e8-b7-af-e7-94-b1-e5-99-a8-e5-90-8e-e9-97-a8-e3-80-82.html" itemprop="url">
                  D-Link路由器万能密码，D-Link路由器后门。
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-11-06T11:43:32+08:00" content="2013-11-06">
              2013-11-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/设计/" itemprop="url" rel="index">
                    <span itemprop="name">设计</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/detail/d-link-e8-b7-af-e7-94-b1-e5-99-a8-e4-b8-87-e8-83-bd-e5-af-86-e7-a0-81-ef-bc-8cd-link-e8-b7-af-e7-94-b1-e5-99-a8-e5-90-8e-e9-97-a8-e3-80-82.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>D-Link的固件由其美国子公司Alpha Networks开发。安全研究人员发现，不需要任何验证，只需要浏览器用户代理字符串（User Agent String）是“xmlset_roodkcableoj28840ybtide”（不含引号）就能访问路由器的Web界面，浏览和改变设备设置。受影 响的友讯科技路由器型号包括 DIR-100DI-524、DI-524UP、DI-604S、DI-604UP、DI-604+和TM-G5240等。</p>
<p>网友发 现，roodkcableoj28840ybtide字符从后往前读是“Edit by 04882 Joel Backdoor”，其中Joel可能是Alpha Networks的资深技术总监Joel Liu。</p>
<p>同学们赶快去试试吧。</p>
<p>本文发表自 <a href="http://post.zz173.com/detail/d-link-e8-b7-af-e7-94-b1-e5-99-a8-e4-b8-87-e8-83-bd-e5-af-86-e7-a0-81-ef-bc-8cd-link-e8-b7-af-e7-94-b1-e5-99-a8-e5-90-8e-e9-97-a8-e3-80-82.html">http://post.zz173.com/detail/d-link-e8-b7-af-e7-94-b1-e5-99-a8-e4-b8-87-e8-83-bd-e5-af-86-e7-a0-81-ef-bc-8cd-link-e8-b7-af-e7-94-b1-e5-99-a8-e5-90-8e-e9-97-a8-e3-80-82.html</a>  未经本人同意，禁止转载。</p>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/detail/winform-start-as-administrator-by-default-method.html" itemprop="url">
                  Winform中默认以管理员方式启动的方法
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-09-17T10:51:34+08:00" content="2013-09-17">
              2013-09-17
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/WinPhone/" itemprop="url" rel="index">
                    <span itemprop="name">WinPhone</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/detail/winform-start-as-administrator-by-default-method.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我们知道，在<em><u>Windows Vista</u></em><br>，微软系列操作系统中加入了&ldquo;UAC&rdquo;权限控制。这是一个显著的安全性能的提升。</p>
<p>在这以后的系统中软件默认使用普通用户方式运行，除非软件声明要求使用管理员方式运行，或者用户强制使用管理员方式运行。</p>
<p>那么我们在做一些敏感功能的时候，比如结束进程、读写内存、更改系统文件、更改系统设置等操作的时候，就需要提供管理员权限，否则无法获取对象。这时就需要我们手动的，显式的声明程序需要管理员权限运行。那么，我们又如何做到呢？</p>
<p>这里引用微软MSDN的说法：</p>
<blockquote>
  <p>右键你的工程，新建一个mainfest（应用程序清单）文件，</p>
  <p>&lt;!– UAC 清单选项</p>
  <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<br>如果要更改 Windows 用户帐户控制级别，请用以下节点之一替换</p>
  <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<br>requestedExecutionLevel 节点。</p>
  <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<br>&lt;requestedExecutionLevel&#160;<br>level=&quot;asInvoker&quot;<br>uiAccess=&quot;false&quot;<br>/&gt;</p>
  <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<br>&lt;requestedExecutionLevel&#160;<br>level=&quot;requireAdministrator&quot;<br>uiAccess=&quot;false&quot;<br>/&gt;</p>
  <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<br>&lt;requestedExecutionLevel&#160;<br>level=&quot;highestAvailable&quot;<br>uiAccess=&quot;false&quot;<br>/&gt;</p>
  <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<br>指定 requestedExecutionLevel 节点将会禁用文件和注册表虚拟化。</p>
  <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<br>如果要利用文件和注册表虚拟化实现向后</p>
  <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;<br>兼容性，则删除 requestedExecutionLevel 节点。</p>
  <p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;<br>–&gt;</p>
  <p>将 &lt;requestedExecutionLevel<br>level=&quot;asInvoker&quot;<br>uiAccess=&quot;false&quot;<br>/&gt;设置为requireAdministrator后，保存运行。当程序需要管理员权限时，就会提示用户是否允许。</p>
</blockquote>
<p>这个是一种方法，还有另外一个方法，是我经常用的。这个需要写在Program.cs里面。</p>
<pre style="border-bottom: #cecece 1px solid; border-left: #cecece 1px solid; padding-bottom: 5px; background-color: #fbfbfb; min-height: 40px; padding-left: 5px; width: 650px; padding-right: 5px; overflow: auto; border-top: #cecece 1px solid; border-right: #cecece 1px solid; padding-top: 5px">
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 1: <span style="color: #0000ff">static</span> <span style="color: #0000ff">void</span> Main(<span style="color: #0000ff">string</span>[] Args)
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 2: {
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 3: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 7: <span style="color: #008000">//获得当前登录的Windows用户标示</span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 8: System.Security.Principal.WindowsIdentity identity = System.Security.Principal.WindowsIdentity.GetCurrent();
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 9: <span style="color: #008000">//创建Windows用户主题</span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 10: Application.EnableVisualStyles();
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 11: 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 12: System.Security.Principal.WindowsPrincipal principal = <span style="color: #0000ff">new</span> System.Security.Principal.WindowsPrincipal(identity);
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 13: <span style="color: #008000">//判断当前登录用户是否为管理员</span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 14: <span style="color: #0000ff">if</span> (principal.IsInRole(System.Security.Principal.WindowsBuiltInRole.Administrator))
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 15: {
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 16: <span style="color: #008000">//如果是管理员，则直接运行</span>
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 17: 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 18: Application.EnableVisualStyles();
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 19: Application.Run(<span style="color: #0000ff">new</span> Form1());
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 20: }
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 21: <span style="color: #0000ff">else</span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 22: {
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 23: <span style="color: #008000">//创建启动对象</span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 24: System.Diagnostics.ProcessStartInfo startInfo = <span style="color: #0000ff">new</span> System.Diagnostics.ProcessStartInfo();
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 25: <span style="color: #008000">//设置运行文件</span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 26: startInfo.FileName = System.Windows.Forms.Application.ExecutablePath;
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 27: <span style="color: #008000">//设置启动参数</span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 28: startInfo.Arguments = String.Join(&quot;<span style="color: #8b0000"> </span>&quot;, Args);
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 29: <span style="color: #008000">//设置启动动作,确保以管理员身份运行</span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 30: startInfo.Verb = &quot;<span style="color: #8b0000">runas</span>&quot;;
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 31: <span style="color: #008000">//如果不是管理员，则启动UAC</span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 32: System.Diagnostics.Process.Start(startInfo);
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 33: <span style="color: #008000">//退出</span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 34: System.Windows.Forms.Application.Exit();
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 35: }
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 36: }
</pre>

<p>本文发表自 <a href="http://post.zz173.com/detail/winform-start-as-administrator-by-default-method.html">http://post.zz173.com/detail/winform-start-as-administrator-by-default-method.html</a> 未经本人同意，禁止转载。</p>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/detail/mvc40-scratch-introduction.html" itemprop="url">
                  MVC4.0从零开始----前言
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-09-03T10:33:13+08:00" content="2013-09-03">
              2013-09-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C#</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/detail/mvc40-scratch-introduction.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>如你所见，从今天起，我将发布一系列MVC4.0的教程博客–虽然我也是菜鸟。</p>
<p>纵然我已经决定了将这一系列博文写的很长很长，但天有不测风云，人有旦夕祸福，造化弄人，世事难料，如果有天不幸太监了，那一定是外力不可抗的原因。</p>
<p>在本系列博文的创作过程中，可能会较多的引注微软官网:<a href="http://asp.net/mvc等相关网站的资料，同时会对一些英文资料进行翻译和注释。但更多的，还是我数年来对程序的理解以及我一直以来强调的，编程思想。" target="_blank" rel="external">http://asp.net/mvc等相关网站的资料，同时会对一些英文资料进行翻译和注释。但更多的，还是我数年来对程序的理解以及我一直以来强调的，编程思想。</a></p>
<p>同时，还会借鉴各位大神的代码碎片以及随笔文录，如有侵权，请任意方式联系我，我会及时修改。</p>
<p>本文发表自 <a href="http://post.zz173.com/detail/mvc40-scratch-introduction.html">http://post.zz173.com/detail/mvc40-scratch-introduction.html</a> 未经本人同意，禁止转载。</p>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/detail/net-products-copyright-protection-scheme-net-source-code-encryption-protection.html" itemprop="url">
                  .NET 产品版权保护方案 (.NET源码加密保护)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-08-29T15:25:20+08:00" content="2013-08-29">
              2013-08-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/C/" itemprop="url" rel="index">
                    <span itemprop="name">C#</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/detail/net-products-copyright-protection-scheme-net-source-code-encryption-protection.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>说明：你希望自己用.net辛辛苦苦做出来的软件被人轻易破解吗？你希望自己花了大量人力物力用.net开发出来的产品被竞争对手轻易获取核心代码吗？这是一篇比较详尽地介绍如何保护自己的.net源代码的文章，如混淆、加密和强名称等，出于保护原作者的角度，所以本人没有掐头去尾作为自己个人的文章，正因为是全文转载，所以并不代表本人完全赞同作者的全部观点，也不代表本人本人提作者提到的软件做广告，这一点请大家注意，不要认为我为别人做广告而骂我，其实我根本不认识作者。</p>
<p>一. 前言</p>
<p>大家好，我是康世杰，大家可以叫我Jason。</p>
<p>我和大家一样，都是搞技术出身，也未当过讲师，所以口材有限，如果讲得不好之处，还希望大家多多海含，谢谢。</p>
<p>今天是我们第一次见面，能认识你们，真的很高兴。</p>
<p>下面我们不要耽误大家的宝贵时间，让我们马上开始上课吧。</p>
<p>DotNet 是 ms开发并推广的企业解决方案，也是Ms以后几年的核心发展战略之一，所以我觉得 DotNet<br>是有前途的，他有一个优秀的概念，还有一个强大的财团，想失败都很难啊。DotNet<br>缺乏的是大型企业高层管理人员对它的信心，这还需要时间和事例去证明，世界上待开发的大案件还很多，Java 和 DotNet<br>最终谁的市场比例多，现在还说不清楚。</p>
<p>二. 简介DOTNET 编译原理</p>
<p>相信大家都使用过 Dotnet ，可能还有不少高手。不过我还要讲讲Dotnet的基础知识，Dotnet的编译原理。</p>
<p>Dotnet是一种建立在虚拟机上执行的语言，它直接生成 MSIL 的中间语言，再由DotNet编译器 JIT<br>解释映象为本机代码并交付CPU执行。它和Java是一种机制的语言。这种语言的优点就是您不需要去考虑您的程序在那里运行，您只需要把功能做出来，虚拟机会在任何地方实现您的功能。这是一个很好的趋势和想法，但虚拟机的中间语言由于带了大量的&ldquo;元数据&rdquo;信息，所以也极容易被反编译。</p>
<p>MSIL 的代码事实上和 C# 或 VB 没有多大的区别，只要您记住20来个指令，您应该可以很容易的读懂它。</p>
<p>保护代码和开源并不冲突，需要保护的一定有自己的理由，所以今天我也不是来反对开源的。。呵呵</p>
<p>三. 中间语言的缺点</p>
<p>中间语言如此容易被反编译，有许多可怕之处。</p>
<p>1. 我们最关心的知识产权</p>
<p>辛苦研究出来的算法，多少个不眠夜研究出来的成果。这本来是你赚钱的法宝，可是被公开了，知识产权没有了，那个时候恨谁啊。</p>
<p>2. 源代码泄漏，被竞争对手拿去和你竞争（这种事很多）</p>
<p>就我知道的都有几起，不过不方便说出来。</p>
<p>他们从客户那里想办法copy回一份别的公司的产品，然后反编译后，改改图片，图片以及版权信息和注册信息，就拿出去卖了。</p>
<p>正规的公司一套卖二万，它们一套才8千。功能基本上一样，你说你是客户，你买谁的？</p>
<p>3. 自己产品的注册机满天飞</p>
<p>做个共享软件吧，赚点钱改善一下生活吧，产品刚上市，还没几天注册机每个网站都有。影响了销售还影响心情，以后不做产品了，还是做服务靠得住，至少盗版不了啊，<br>呵呵，不过做服务，还没那么多资金，真是做什么都难啊。</p>
<p>4. 被别人植入恶意程序，后果得由作者或开发商承担</p>
<p>以上说的都只是被别人占便宜的事情，还好，只是让能占占便宜，算了，亏也亏不了多少。可是，我再讲一个，那可就不是被人占便宜那么简单了。</p>
<p>比方说：贵公司出了套产品，放在网上给人下载试用，定好版本为1.0，某个恶意的公司不怀好意，把产品下载下来，用万恶的Ildasm<br>反编译一下，然后在里面加入一段按条件触发的命令，命令的内容是format c: or format d:. 然后再用万恶的ilasm<br>编译一下，用贵公司的名义打个一模一样的包，升级为1.2试用版，然后放到ftp 或 shareware site<br>上供人试用下载。试想一下，不久您就会接到用户的投诉，甚至是起诉。</p>
<p>再比方说：要离开公司的员工，对公司的种种形为不满，在离职交接以后，把公司Release好的项目的某个dll改一改，必定造成这个项目的重大损失。当然，我可不是在教各位用这种方法对待自己不满的公司。我只是告诉各位，Dotnet的程序集，不保护是不行的。</p>
<p>四. 保护方案分类</p>
<p>下面，我开始介绍一下.NET的各种保护方案。</p>
<p>我把Dotnet的保护分为三大类</p>
<ol>
  <li>由m$ 提供的非第三方保护方案</li>
</ol>
<p>a) 强名称</p>
<p>强名称是MS提供的保护机制。</p>
<p>它需要使用 sn 这个命令。</p>
<p>强名称是什么意思呢？在这里稍作解释。强名称的作用就是防止程序集被非法修改，当对程序集修改后，必须重新用您的私钥再对程序集加一次强名称，这也是如果含有强名称的程序集在混淆或加密后必须要重新加强名称的原因。</p>
<p>Sn / ? 可以看到它的使用方法，如果你安装的 Framework是中文的，那么参数的解释也是中文的，我就不多讲了。</p>
<p>那么强名称有用吗？网上轻松破解强名称的方法很多，Ildasm反编译加过强名称的程序集后，在IL文件中将强名称的相关信息去掉，再利用Ilasm编译，就可以解除强名称的限制了。这个我已经过测试过，您的强名称的PublcKey不管是加在程序集中，还是加在Class中，都可以被去掉，所以强名称不是一个完善的保护方式。不过在这里要说一下，如果有一个好的方案能和强名称一起使用，那么将建立一个非常好的机制，防修改，防滥用。</p>
<p>说到滥用，这是强名称的一个特殊用途，它可以使您的dll不被第三方调用，如果您的dll能保护自己的话。</p>
<p>关于强命称讲到这里，他的使用方式有必要的情况下，我们以后再深入的讲解。</p>
<p>b) 编译MSIL为本机代码 （误区？）</p>
<p>关于这一点，我经常能在MS上的社区看到有MVP这样面对问题：</p>
<p>问：C#写的程序能编译成本机代码吗？</p>
<p>答：可以，使用 Ngen.exe 即可以 MSIL 代码编译为 本机代码。</p>
<p>MVP这样回答错了吗？其实，严格的说，MVP的回答是没错的，Ngen.exe的确是可以将 MSIL<br>编译为本机代码，并可以使JIT不需要进行再次编译MSIL。这样能加快程序的执行效率。</p>
<p>但用户这样的问题其实，并不是对执行效率不满意，而是对中间语言不满意，可惜 Ngen 并不能解决用户的问题。</p>
<p>让我们来浅浅的分析一下 Ngen的工作吧。</p>
<p>Ngen是MS提供的<br>本机映象生成器，它可以将中间语言程序集编译为本机代码存放在缓存中。这里请大家注意，是存放在缓存中，Dotnet在内存中建立了一个缓存，这个缓存中存放了许多常用的程序集编译后的本机代码，它们是常驻的，由此来加快Dotnet的执行速度。</p>
<p>所谓一个本机代码，因为本机映射时，会映射出一些 Framework 里需要的Method，编译为汇编就是 Call<br>0x0200000这样的样子，而这些东西必须是事件编译好的。那么理论上说 Ngen<br>必须要在当前执行的机器上运行，而直接编译成本机代码的程序copy到另一个地方不一定可以用，而且我一直没有找到能将缓存中的本机代码<br>copy 出来的方法。</p>
<p>讲到这里，不知道大家明白我的意思没有，不管如何 Ngen.exe<br>只是一个提速的工具，因为要执行编译为本机代码必须还是要原程序集，而原程序集中存在MSIL，所以让程序无法脱离被反编译的目地。</p>
<p>大家回家，如果有空，可以做做试验。</p>
<p>Ngen /show 就可以看到缓存中所有的已编译好的程序集，所以Dotnet并不慢。</p>
<p>Ngen &lt;assembly path or display name&gt;<br>可以把指定程序集映象为本机代码。</p>
<p>Ngen /? 可以看到其它参数</p>
<p>以上是ms提供的工具，下在讲讲，自己在编程的过程中，如何使用技巧来防止破解或反编译。</p>
<ol>
  <li>编程技巧保护方案</li>
</ol>
<p>在这里，我会给大家介绍两种三种方式</p>
<p>1. 人为混淆</p>
<p>在这里，我就要先简单的讲讲什么叫做混淆</p>
<p>混淆顾名思意，就是混乱，不明确的意思。MetaData中都有一个Rid，程序集运行时就已经和名称没什么关系了，都使用Rid来调用的，所以可以将名称省去。</p>
<p>什么叫人为混淆呢，就是人为的制造混淆。</p>
<p>曾经看过一个程序集，手工的将一个Method折成几十个或上百个，从而达到让你看不懂的目的。不过可惜的说一句：现在的Dotnet程序集的分析工具都很强大，正引用，反调用都可以用程序来实现，所以即实这么做，了没多大用处。著名的Reflector就有这些功能。</p>
<p>2. 隐藏程序集</p>
<p>刚刚谈到了Reflector，它就是使用这种方式来隐藏自己的核心程序集的。相信我，Reflector并不是您看到的那一个可执行程序，它的可执行程序只是一个壳而以，里面是一个定义和接口，没有实例的方法。如果你想得到他是怎样反编译的核心，恐怕你会在它这个迷宫中迷失方向。</p>
<p>它是怎样做的呢？让我来告诉你，它的核心程序集事实上就是它的一个资源。而这个资源是一个加密的资源。如果我没记错，他应该是在双击第一个需要反编译的Method的时候开始释放这个资源，并对资源解密然后动态的加载。这样做的优点核心程序集是不会在硬盘上留下任何痕迹的，它只解在内存中解密并被加载，你基本上无法得到这个程序集。而且Dotnet是不允许内存<br>Dump的。</p>
<p>大家是不是觉得这种保护方法不错呢？你可以把你的核心代码加密后做成资源包在程序里，在使用的时候再解密出来，这只需要你自己去实现就可以了。</p>
<p>不过我还得说句负责任的话，如果你有精力，并且很有耐心和技术，相信你还是可以在几天时间内找出它的核心程序集解密算法的位置。并成功的解出它的资源程序集。</p>
<p>如果是高手又非常有经验，这种方式的加密手段应该是秒杀。</p>
<p>3. 将程序集中的相关Method(方法)编译成Unmanaged（非托管代码）</p>
<p>下面介绍的内容是不管你是菜鸟，或是高手，都无法得到核心代码的方</p>
<p>它可称之为终极的保护手段，因为它就是&ldquo;非托管代码&rdquo;。</p>
<p>什么是托管代码，什么是非托管代码。</p>
<p>简单的说，托管代码就是需要Jit去解释的中间语言代码，而非托管代码</p>
<p>就是本机代码。下面要介绍的方式就是教您如何在自己的程序集中即拥有托管代码，又拥有非托管代码。注意，非托管代码是无法被现在的反编译工具反编译的。</p>
<p>特别注意一点，我没有自己试过，但我看人做过，并得到了证实。</p>
<p>在Dotnet程序集中，允许托管代码和非托管代码共存，怎样实现呢？这并不是无偿的，这是需要条件的。它的条件就是必须使用VC++.NET非托管方式来写dll，再用VC++托管方式建立工程引入这个本机代码的dll。最终生成一个Dotnet程序集的dll。那么这个程序集里面即有托管代码，又有非托管代码。托管代码是可以反编译的，而非托管代码不可能被反编译。</p>
<p>有人可能要问了，这和自己用VC++写个dll有什么区别？区别就是这样的结合更紧密一些，而且也不能用常规的分析Asm的工具去分析这个dll。</p>
<p>这里还要解释一个误解，有人说，利用Win32的本机代码写注册算法，并生成dll供给Dotnet程序集调用，防止破解。其实这句话只说对了一半，这只能增加破解注册机的难度，并防止不了破解。为什么呢？因为注册对不对还是要在Dotnet程序集中进行判断，所以，只要改掉这个判断，一样达到了破解效果。但是如果要分析注册算法，那可就是困难了一些了。</p>
<ol>
  <li>第三方保护工具</li>
</ol>
<p>下面，我们讲一讲第三方的保护工具和概念</p>
<p>第三方保护工具较好的厂商有：</p>
<p>1. Aiasted.SOFT</p>
<p>a) 产品 ：MaxtoCode ，种类 ：加密、混淆</p>
<p>2. PerEmptive Solutions</p>
<p>a) 产品 ：Dotfuscator Community ，种类 ：混淆</p>
<p>3. Remotesoft</p>
<p>a) 产品 ：Remotesoft Protect ，种类 ：加密</p>
<p>b) 产品 ：Remotesoft Dotfuscator ，种类 ：混淆</p>
<p>4. XenoCode</p>
<p>a) 产品 ：XenoCode ，种类：混淆</p>
<p>5. 其它的一些公司，最近上海有一款公司出了国内第一款混淆工具，如果大家要选择混淆产品的话，支持一下国产也不错。</p>
<p>第三方工具的保护方式分类</p>
<p>1. 混淆 ?</p>
<p>这是目前最流行的方式吧。今天我们就来做个剖析。让大家去衡量一下混淆的强度如何。</p>
<p>混淆软件一般都有三个功能</p>
<p>1. 字符串加密</p>
<p>2. 名称混淆</p>
<p>3. 流程混淆</p>
<p>目前流行的混淆软件有</p>
<p>XenoCode、Dotfuscator、Remotesoft，MaxtoCode里也集成了少许混淆功能。</p>
<p>利用幻灯片讲解流程混淆原理</p>
<p>利用程序当场演示如何反流程混淆</p>
<p>1.目标程序</p>
<p><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" alt="" title=".NET&nbsp;&lt;wbr&gt;产品版权保护方案&nbsp;&lt;wbr&gt;(.NET源码加密保护)"><wbr>产品版权保护方案&nbsp;<wbr>(.NET源码加密保护)” /&gt;</p>
<p>2.被混淆的程序使用 Reflector 查看</p>
<p><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" alt="" title=".NET&nbsp;&lt;wbr&gt;产品版权保护方案&nbsp;&lt;wbr&gt;(.NET源码加密保护)"><wbr>产品版权保护方案&nbsp;<wbr>(.NET源码加密保护)” /&gt;</p>
<p>3.使用Ildasm反编译出 IL 文件
</p>
<p>ildasm XenoCodeTest.exe /out=XenoCodeTest.il</p>
<p>4.将IL 文件中的某个方法抽出</p>
<p><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" alt="" title=".NET&nbsp;&lt;wbr&gt;产品版权保护方案&nbsp;&lt;wbr&gt;(.NET源码加密保护)"><wbr>产品版权保护方案&nbsp;<wbr>(.NET源码加密保护)” /&gt;</p>
<p>5.使用 Deflow 进行反混淆</p>
<p><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" alt="" title=".NET&nbsp;&lt;wbr&gt;产品版权保护方案&nbsp;&lt;wbr&gt;(.NET源码加密保护)"><wbr>产品版权保护方案&nbsp;<wbr>(.NET源码加密保护)” /&gt;</p>
<p>6.回填,并使用 Ilasm 进行编译
</p>
<p>Ilasm XenoCodeTest.il /resource=XenoCodeTest.res<br>/output=XenoCodeTestNew.exe</p>
<p>7.再回到 Reflector 中进行查看</p>
<p><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" alt="" title=".NET&nbsp;&lt;wbr&gt;产品版权保护方案&nbsp;&lt;wbr&gt;(.NET源码加密保护)"><wbr>产品版权保护方案&nbsp;<wbr>(.NET源码加密保护)” /&gt;<br>
</p>
<p>2. 打包 ?</p>
<p>ThInstall 是一个打包工具，他可以打包几乎所有的应用程序，也包括</p>
<p>Dotnet。</p>
<p>他将多个Dotnet程序集包在一个大程序里，达到无法反编译的目地。不过想想也知道，即然是打包，在需要运行时肯定会释放，如果找到了释放出来的文件，就跟没保护一样了，所以，这算是一个最烂的保护手段。当然，本来我没想把它列进来的，是因为看到论坛上经常有人用这个Thinstall回复别人说可以保护Dotnet程序集，所以我才特别忠告大家，别信。</p>
<p>3. 加密 ?</p>
<p>加密保护并不同于混淆，它是目前最好的保护方式，也是保护能力最强的。</p>
<p>他把Dotnet的先天不足在一定程度上大幅提高，为Dotnet引来更多的开发者。加密保护的软件都有一个共同点，即把Dotnet的反编译引深到Win32的反汇编中了，可惜的是，也限制了Dotnet跨平台的优势。</p>
<p>此类的代表软件有</p>
<p>MaxtoCode 、Remotesoft protect ，其它的一些国外的，我就不说了，实在让人用不下去。</p>
<p>由于Remotesoft公司过于小气，Protect连试用版都不提供，所以我只能找到他的一个加密过的产品<br>WebGrid3.5，但WebGrid4.0就未用Protect了，不知道为什么，几千美金就这么废了？分析WebGrid3.5以后，发现他和MaxtoCode一样，产生的结果就是看不到IL代码了，而且也会生成一个本机代码的DLL作为运行环境。</p>
<p>由于对Remotesoft<br>Protect无法深入研究，只知道效果和MaxtoCode一样，那么我们就来讲讲MaxtoCode的实现原理吧。</p>
<p>MaxtoCode是为了迷补Dotnet的先天性不足而出世的。它是中国第一款高强度的Dotnet保护软件，在世界的Dotnet保护水平线上也处于优势性的领先。</p>
<p>其实MaxtoCode的原理很简单，它是将程序集中所有的IL进行加密，所以使用反编译器无法看到IL，从而不能进行反编译。基于Framework提取Method的IL作为基础原理，当JIT需要IL时，我就将加过密的IL解密给JIT去编译，这样就形成了MaxtoCode的基本原理。</p>
<p>下面是MaxtoCode 加密的过程及结果:</p>
<p>1.选择程序集</p>
<p><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" alt="" title=".NET&nbsp;&lt;wbr&gt;产品版权保护方案&nbsp;&lt;wbr&gt;(.NET源码加密保护)"><wbr>产品版权保护方案&nbsp;<wbr>(.NET源码加密保护)” /&gt;</p>
<p>2.选择高级加密的选项</p>
<p><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" alt="" title=".NET&nbsp;&lt;wbr&gt;产品版权保护方案&nbsp;&lt;wbr&gt;(.NET源码加密保护)"><wbr>产品版权保护方案&nbsp;<wbr>(.NET源码加密保护)” /&gt;</p>
<p>3.选择混淆的选项</p>
<p><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" alt="" title=".NET&nbsp;&lt;wbr&gt;产品版权保护方案&nbsp;&lt;wbr&gt;(.NET源码加密保护)"><wbr>产品版权保护方案&nbsp;<wbr>(.NET源码加密保护)” /&gt;</p>
<p>4.加密</p>
<p><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" alt="" title=".NET&nbsp;&lt;wbr&gt;产品版权保护方案&nbsp;&lt;wbr&gt;(.NET源码加密保护)"><wbr>产品版权保护方案&nbsp;<wbr>(.NET源码加密保护)” /&gt;</p>
<p>5.结果
</p>
<p>加密后的程序运行结果:</p>
<p><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" alt="" title=".NET&nbsp;&lt;wbr&gt;产品版权保护方案&nbsp;&lt;wbr&gt;(.NET源码加密保护)"><wbr>产品版权保护方案&nbsp;<wbr>(.NET源码加密保护)” /&gt;</p>
<p>使用 Reflector 反编译的结果</p>
<p><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" alt="" title=".NET&nbsp;&lt;wbr&gt;产品版权保护方案&nbsp;&lt;wbr&gt;(.NET源码加密保护)"><wbr>产品版权保护方案&nbsp;<wbr>(.NET源码加密保护)” /&gt;</p>
<p>使用 MS 自带的工具 Ildasm 进行反编译</p>
<p><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" alt="" title=".NET&nbsp;&lt;wbr&gt;产品版权保护方案&nbsp;&lt;wbr&gt;(.NET源码加密保护)"><wbr>产品版权保护方案&nbsp;<wbr>(.NET源码加密保护)” /&gt;</p>
<p>使用 Ildasm 查看代码区内容</p>
<p><img src="http://simg.sinajs.cn/blog7style/images/common/sg_trans.gif" alt="" title=".NET&nbsp;&lt;wbr&gt;产品版权保护方案&nbsp;&lt;wbr&gt;(.NET源码加密保护)"><wbr>产品版权保护方案&nbsp;<wbr>(.NET源码加密保护)” /&gt;</p>
<p>源代码都为空了,完全不可以反编译.杜绝了反编译的问题.
</p>
<p>本文发表自 <a href="http://post.zz173.com/detail/net-products-copyright-protection-scheme-net-source-code-encryption-protection.html">http://post.zz173.com/detail/net-products-copyright-protection-scheme-net-source-code-encryption-protection.html</a> 未经本人同意，禁止转载。</p>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/detail/dz-classical-encryption-and-decryption-methods.html" itemprop="url">
                  Dz经典加密解密方法。
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-08-29T15:14:22+08:00" content="2013-08-29">
              2013-08-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/php/" itemprop="url" rel="index">
                    <span itemprop="name">php</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/detail/dz-classical-encryption-and-decryption-methods.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>一个非常经典的加密方法，DZ所有产品都在使用这个方法进行加密。</p>
<p>注释非常详细，大家可以研究研究，但切不可拿来直接用于商业用途啊。</p>
<p>因为dz对改方法持有版权。</p>
<pre style="border-bottom: #cecece 1px solid; border-left: #cecece 1px solid; padding-bottom: 5px; background-color: #fbfbfb; min-height: 40px; padding-left: 5px; width: 650px; padding-right: 5px; overflow: auto; border-top: #cecece 1px solid; border-right: #cecece 1px solid; padding-top: 5px">
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 1: <span style="color: #0000ff">&lt;?</span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 2: <span style="color: #008000">// $string： 明文 或 密文 </span>
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 3: <span style="color: #008000">// $operation：DECODE表示解密,其它表示加密 </span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 4: <span style="color: #008000">// $key： 密匙 </span>
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 5: <span style="color: #008000">// $expiry：密文有效期 </span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 6: [function](http://www.php.net/function) authcode($string, $operation = '<span style="color: #8b0000">DECODE</span>', $[key](http://www.php.net/key) = '', $expiry = 0) { 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 7: <span style="color: #008000">// 动态密匙长度，相同的明文会生成不同密文就是依靠动态密匙 </span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 8: $ckey_length = 4; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 9: 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 10: <span style="color: #008000">// 密匙 </span>
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 11: $[key](http://www.php.net/key) = md5($[key](http://www.php.net/key) ? $[key](http://www.php.net/key) : $GLOBALS['<span style="color: #8b0000">discuz_auth_key</span>']); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 12: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 13: <span style="color: #008000">// 密匙a会参与加解密 </span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 14: $keya = md5([substr](http://www.php.net/substr)($[key](http://www.php.net/key), 0, 16)); 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 15: <span style="color: #008000">// 密匙b会用来做数据完整性验证 </span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 16: $keyb = md5([substr](http://www.php.net/substr)($[key](http://www.php.net/key), 16, 16)); 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 17: <span style="color: #008000">// 密匙c用于变化生成的密文 </span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 18: $keyc = $ckey_length ? ($operation == '<span style="color: #8b0000">DECODE</span>' ? [substr](http://www.php.net/substr)($string, 0, $ckey_length): [substr](http://www.php.net/substr)(md5([microtime](http://www.php.net/microtime)()), -$ckey_length)) : ''; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 19: <span style="color: #008000">// 参与运算的密匙 </span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 20: $cryptkey = $keya.md5($keya.$keyc); 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 21: $key_length = [strlen](http://www.php.net/strlen)($cryptkey); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 22: <span style="color: #008000">// 明文，前10位用来保存时间戳，解密时验证数据有效性，10到26位用来保存$keyb(密匙b)，解密时会通过这个密匙验证数据完整性 </span>
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 23: <span style="color: #008000">// 如果是解码的话，会从第$ckey_length位开始，因为密文前$ckey_length位保存 动态密匙，以保证解密正确 </span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 24: $string = $operation == '<span style="color: #8b0000">DECODE</span>' ? base64_decode([substr](http://www.php.net/substr)($string, $ckey_length)) : [sprintf](http://www.php.net/sprintf)('<span style="color: #8b0000">0d</span>', $expiry ? $expiry + [time](http://www.php.net/time)() : 0).[substr](http://www.php.net/substr)(md5($string.$keyb), 0, 16).$string; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 25: $string_length = [strlen](http://www.php.net/strlen)($string); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 26: $result = ''; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 27: $box = [range](http://www.php.net/range)(0, 255); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 28: $rndkey = [array](http://www.php.net/array)(); 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 29: <span style="color: #008000">// 产生密匙簿 </span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 30: [for](http://www.php.net/for)($i = 0; $i &lt;= 255; $i++) { 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 31: $rndkey[$i] = [ord](http://www.php.net/ord)($cryptkey[$i % $key_length]); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 32: } 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 33: <span style="color: #008000">// 用固定的算法，打乱密匙簿，增加随机性，好像很复杂，实际上对并不会增加密文的强度 </span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 34: [for](http://www.php.net/for)($j = $i = 0; $i &lt; 256; $i++) { 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 35: $j = ($j + $box[$i] + $rndkey[$i]) % 256; 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 36: $tmp = $box[$i]; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 37: $box[$i] = $box[$j]; 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 38: $box[$j] = $tmp; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 39: } 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 40: <span style="color: #008000">// 核心加解密部分 </span>
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 41: [for](http://www.php.net/for)($a = $j = $i = 0; $i &lt; $string_length; $i++) { 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 42: $a = ($a + 1) % 256; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 43: $j = ($j + $box[$a]) % 256; 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 44: $tmp = $box[$a]; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 45: $box[$a] = $box[$j]; 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 46: $box[$j] = $tmp; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 47: <span style="color: #008000">// 从密匙簿得出密匙进行异或，再转成字符 </span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 48: $result .= [chr](http://www.php.net/chr)([ord](http://www.php.net/ord)($string[$i]) ^ ($box[($box[$a] + $box[$j]) % 256])); 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 49: } 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 50: [if](http://www.php.net/if)($operation == '<span style="color: #8b0000">DECODE</span>') { 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 51: <span style="color: #008000">// substr($result, 0, 10) == 0 验证数据有效性 </span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 52: <span style="color: #008000">// substr($result, 0, 10) - time() &gt; 0 验证数据有效性 </span>
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 53: <span style="color: #008000">// substr($result, 10, 16) == substr(md5(substr($result, 26).$keyb), 0, 16) 验证数据完整性 </span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 54: <span style="color: #008000">// 验证数据有效性，请看未加密明文的格式 </span>
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 55: [if](http://www.php.net/if)(([substr](http://www.php.net/substr)($result, 0, 10) == 0 || [substr](http://www.php.net/substr)($result, 0, 10) - [time](http://www.php.net/time)() &gt; 0) &amp;&amp; [substr](http://www.php.net/substr)($result, 10, 16) == [substr](http://www.php.net/substr)(md5([substr](http://www.php.net/substr)($result, 26).$keyb), 0, 16)) { 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 56: [return](http://www.php.net/return) [substr](http://www.php.net/substr)($result, 26); 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 57: } [else](http://www.php.net/else) { 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 58: [return](http://www.php.net/return) ''; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 59: } 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 60: } [else](http://www.php.net/else) { 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 61: <span style="color: #008000">// 把动态密匙保存在密文里，这也是为什么同样的明文，生产不同密文后能解密的原因 </span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 62: <span style="color: #008000">// 因为加密后的密文可能是一些特殊字符，复制过程可能会丢失，所以用base64编码 </span>
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 63: [return](http://www.php.net/return) $keyc.[str_replace](http://www.php.net/str_replace)('<span style="color: #8b0000">=</span>', '', base64_encode($result)); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 64: } 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 65: }
</pre>

<p>本文发表自 <a href="http://post.zz173.com/detail/dz-classical-encryption-and-decryption-methods.html">http://post.zz173.com/detail/dz-classical-encryption-and-decryption-methods.html</a> 未经本人同意，禁止转载。</p>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/detail/sina-microblogging-short-links-mouth-and-research.html" itemprop="url">
                  新浪微博短链接口与研究
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-08-29T10:02:50+08:00" content="2013-08-29">
              2013-08-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/misc/" itemprop="url" rel="index">
                    <span itemprop="name">misc</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/detail/sina-microblogging-short-links-mouth-and-research.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>上一篇博文中我们讲到了百度短网址接口，那么这篇文章中我们着重讲述的是新浪短链的接口。</p>
<p>相比对与百度短链接口来说，新浪短链接口有一个好处就是，可以解析任意网址，而不像百度，会对一些知名度不很高的网址做一屏蔽。但是有一个麻烦的地方就是，短链是基于微博开放平台而存在的，因此必须申请APPKEY或者OAuth授权。</p>
<p>那么我建议的方式是使用APPKEY方式进行开发，为什么呢？因为OAuth授权是需要用户登录微博的，我们不可能要求别人使用你的短链服务而专门登录一次微博吧？这明显不现实，也不合理。</p>
<p>申请APPKEY的方式非常简单，这里就不再叙述。相信能看到这篇博文的你不会被这些小学生都会的问题难倒吧！</p>
<p>与百度所不同的是，新浪接口没有给出实例代码。那么本博文的重点也就来了，写出一版示例代码来。</p>
<p>同样的，我们仍然使用php作为示例语言。</p>
<p>这个是短链接转成长链接的。</p>
<p>需要注意的是新浪的接口地址是用使用的json接口，并且是https安全方式访问的，所以要选择忽略证书验证，否则就需要下载证书了。。</p>
<pre style="border-bottom: #cecece 1px solid; border-left: #cecece 1px solid; padding-bottom: 5px; background-color: #fbfbfb; min-height: 40px; padding-left: 5px; width: 650px; padding-right: 5px; overflow: auto; border-top: #cecece 1px solid; border-right: #cecece 1px solid; padding-top: 5px">
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 1: <span style="color: #0000ff">&lt;?</span>php 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 2: private [function](http://www.php.net/function) get_longurl($tinyurl) { 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 3: $data=[array](http://www.php.net/array)('<span style="color: #8b0000">source</span>' =&gt; '<span style="color: #8b0000">YOU APP KEY</span>','<span style="color: #8b0000">url_short</span>'=&gt;$tinyurl); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 4: $api_url = &quot;<span style="color: #8b0000">https://api.weibo.com/2/short_url/expand.json?</span>&quot; . http_build_query($data); 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 5: $ch=[curl_init](http://www.php.net/curl_init)(); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 6: [curl_setopt](http://www.php.net/curl_setopt)($ch,CURLOPT_URL,$api_url); 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 7: [curl_setopt](http://www.php.net/curl_setopt)($ch,CURLOPT_RETURNTRANSFER,[true](http://www.php.net/true)); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 8: <span style="color: #008000">//注意，这里一定得设置为FALSE,否则就需要下载证书</span>
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 9: [curl_setopt](http://www.php.net/curl_setopt)($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 10: [curl_setopt](http://www.php.net/curl_setopt)($ch, CURLOPT_SSL_VERIFYHOST, FALSE); 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 11: $strRes=[curl_exec](http://www.php.net/curl_exec)($ch); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 12: [curl_close](http://www.php.net/curl_close)($ch); 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 13: $arrResponse=json_decode($strRes,[true](http://www.php.net/true))['<span style="color: #8b0000">urls</span>'][0]; 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 14: [if](http://www.php.net/if) ($arrResponse['<span style="color: #8b0000">result</span>']=='<span style="color: #8b0000">true</span>') 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 15: { 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 16: [return](http://www.php.net/return) $arrResponse['<span style="color: #8b0000">url_long</span>']; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 17: } 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 18: [return](http://www.php.net/return) $arrResponse['<span style="color: #8b0000">error</span>']; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 19: } 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 20: <span style="color: #0000ff">?&gt;</span>
</pre>

<p>这个长链转短链的</p>
<p>&#160;</p>
<pre style="border-bottom: #cecece 1px solid; border-left: #cecece 1px solid; padding-bottom: 5px; background-color: #fbfbfb; min-height: 40px; padding-left: 5px; width: 650px; padding-right: 5px; overflow: auto; border-top: #cecece 1px solid; border-right: #cecece 1px solid; padding-top: 5px">
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 1: <span style="color: #0000ff">&lt;?</span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 2: private [function](http://www.php.net/function) get_shorturl($longurl) { 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 3: $data=[array](http://www.php.net/array)('<span style="color: #8b0000">source</span>' =&gt; '<span style="color: #8b0000">YOU APP KEY</span>','<span style="color: #8b0000">url_long</span>'=&gt;$longurl); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 4: $api_url = &quot;<span style="color: #8b0000">https://api.weibo.com/2/short_url/shorten.json</span>&quot; . http_build_query($data); 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 5: $ch=[curl_init](http://www.php.net/curl_init)(); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 6: [curl_setopt](http://www.php.net/curl_setopt)($ch,CURLOPT_URL,$api_url); 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 7: [curl_setopt](http://www.php.net/curl_setopt)($ch,CURLOPT_RETURNTRANSFER,[true](http://www.php.net/true)); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 8: <span style="color: #008000">//注意，这里一定得设置为FALSE,否则就需要下载证书</span>
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 9: [curl_setopt](http://www.php.net/curl_setopt)($ch, CURLOPT_SSL_VERIFYPEER, FALSE); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 10: [curl_setopt](http://www.php.net/curl_setopt)($ch, CURLOPT_SSL_VERIFYHOST, FALSE); 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 11: $strRes=[curl_exec](http://www.php.net/curl_exec)($ch); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 12: [curl_close](http://www.php.net/curl_close)($ch); 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 13: $arrResponse=json_decode($strRes,[true](http://www.php.net/true))['<span style="color: #8b0000">urls</span>'][0]; 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 14: [if](http://www.php.net/if) ($arrResponse['<span style="color: #8b0000">result</span>']=='<span style="color: #8b0000">true</span>') 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 15: { 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 16: [return](http://www.php.net/return) $arrResponse['<span style="color: #8b0000">url_short</span>']; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 17: } 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 18: [return](http://www.php.net/return) $arrResponse['<span style="color: #8b0000">error</span>']; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 19: }
</pre>

<p>&#160;</p>
<p>要说明的是，新浪的接口是支持批量转换的，方法是</p>
<p>$data=array(‘source’ =&gt; ‘YOU APP<br>KEY’,’url_long’=&gt;$longurl,’url_long’=&gt;$longurl1,’url_long’=&gt;$longurl2,’url_long’=&gt;$longurl3&hellip;);</p>
<p>一直传入参数即可。</p>
<p>而获取的时候</p>
<p>$arrResponse=json_decode($strRes,true)[‘urls’][0];</p>
<p>$arrResponse=json_decode($strRes,true)[‘urls’][1];</p>
<p>$arrResponse=json_decode($strRes,true)[‘urls’][2];</p>
<p>等等。</p>
<p>希望可以对你有所启发。</p>
<p>本文发表自 <a href="http://post.zz173.com/detail/sina-microblogging-short-links-mouth-and-research.html">http://post.zz173.com/detail/sina-microblogging-short-links-mouth-and-research.html</a> 未经本人同意，禁止转载。</p>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/detail/baidu-short-url-interfaces-and-research.html" itemprop="url">
                  百度短网址接口与研究
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2013-08-28T18:06:06+08:00" content="2013-08-28">
              2013-08-28
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/misc/" itemprop="url" rel="index">
                    <span itemprop="name">misc</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/detail/baidu-short-url-interfaces-and-research.html#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>目前来说，短网址是一个非常流行的趋势，对于内链和跳转来说。</p>
<p>比如新浪微博的t.cn</p>
<p>腾讯的url.cn</p>
<p>以及百度的dwz.cn，这些断链平台都提供了自己的接口以供开发者进行短链和长链的转换。</p>
<p>这其中最简单的莫过于百度的短网址服务，dwz.cn。</p>
<p>下面提供PHP版的加密和解密接口如下：</p>
<pre style="border-bottom: #cecece 1px solid; border-left: #cecece 1px solid; padding-bottom: 5px; background-color: #fbfbfb; min-height: 40px; padding-left: 5px; width: 650px; padding-right: 5px; overflow: auto; border-top: #cecece 1px solid; border-right: #cecece 1px solid; padding-top: 5px">
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 1: <span style="color: #0000ff">&lt;?</span>php 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 2: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 3: $ch=[curl_init](http://www.php.net/curl_init)(); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 4: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 5: [curl_setopt](http://www.php.net/curl_setopt)($ch,CURLOPT_URL,&quot;<span style="color: #8b0000">http://dwz.cn/create.php</span>&quot;); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 6: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 7: [curl_setopt](http://www.php.net/curl_setopt)($ch,CURLOPT_POST,[true](http://www.php.net/true)); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 8: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 9: [curl_setopt](http://www.php.net/curl_setopt)($ch,CURLOPT_RETURNTRANSFER,[true](http://www.php.net/true)); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 10: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 11: $data=[array](http://www.php.net/array)('<span style="color: #8b0000">url</span>'=&gt;'<span style="color: #8b0000">http://www.baidu.com/</span>'); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 12: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 13: [curl_setopt](http://www.php.net/curl_setopt)($ch,CURLOPT_POSTFIELDS,$data); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 14: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 15: $strRes=[curl_exec](http://www.php.net/curl_exec)($ch); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 16: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 17: [curl_close](http://www.php.net/curl_close)($ch); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 18: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 19: $arrResponse=json_decode($strRes,[true](http://www.php.net/true)); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 20: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 21: [if](http://www.php.net/if)($arrResponse['<span style="color: #8b0000">status</span>']!=0) 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 22: { 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 23:  
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 24: [echo](http://www.php.net/echo) iconv('<span style="color: #8b0000">UTF-8</span>','<span style="color: #8b0000">GBK</span>',$arrResponse['<span style="color: #8b0000">err_msg</span>']).&quot;<span style="color: #8b0000">n</span>&quot;; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 25: } 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 26: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 27: <span style="color: #008000">//返回短网址</span>
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 28: [echo](http://www.php.net/echo)$arrResponse['<span style="color: #8b0000">tinyurl</span>'].&quot;<span style="color: #8b0000">n</span>&quot;; 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 29: 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 30: <span style="color: #0000ff">?&gt;</span>
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 31:
</pre>

<p>下面是解密的</p>
<p>&#160;</p>
<pre style="border-bottom: #cecece 1px solid; border-left: #cecece 1px solid; padding-bottom: 5px; background-color: #fbfbfb; min-height: 40px; padding-left: 5px; width: 650px; padding-right: 5px; overflow: auto; border-top: #cecece 1px solid; border-right: #cecece 1px solid; padding-top: 5px">
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 1: <span style="color: #0000ff">&lt;?</span>php 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 2: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 3: $ch=[curl_init](http://www.php.net/curl_init)(); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 4: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 5: [curl_setopt](http://www.php.net/curl_setopt)($ch,CURLOPT_URL,&quot;<span style="color: #8b0000">http://dwz.cn/query.php</span>&quot;); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 6: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 7: [curl_setopt](http://www.php.net/curl_setopt)($ch,CURLOPT_POST,[true](http://www.php.net/true)); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 8: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 9: [curl_setopt](http://www.php.net/curl_setopt)($ch,CURLOPT_RETURNTRANSFER,[true](http://www.php.net/true)); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 10: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 11: $data=[array](http://www.php.net/array)('<span style="color: #8b0000">tinyurl</span>'=&gt;'<span style="color: #8b0000">http://dwz.cn/1E</span>'); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 12: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 13: [curl_setopt](http://www.php.net/curl_setopt)($ch,CURLOPT_POSTFIELDS,$data); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 14: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 15: $strRes=[curl_exec](http://www.php.net/curl_exec)($ch); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 16: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 17: [curl_close](http://www.php.net/curl_close)($ch); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 18: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 19: $arrResponse=json_decode($strRes,[true](http://www.php.net/true)); 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 20: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 21: [if](http://www.php.net/if)($arrResponse['<span style="color: #8b0000">status</span>']==0) 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 22: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 23: { 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 24: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 25:  
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 26: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 27: [echo](http://www.php.net/echo) iconv('<span style="color: #8b0000">UTF-8</span>','<span style="color: #8b0000">GBK</span>',$arrResponse['<span style="color: #8b0000">err_msg</span>']).&quot;<span style="color: #8b0000">n</span>&quot;; 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 28: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 29: } 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 30: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 31:  
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 32: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 33: [echo](http://www.php.net/echo)$arrResponse['<span style="color: #8b0000">longurl</span>'].&quot;<span style="color: #8b0000">n</span>&quot;; 
</pre>
<pre style="background-color: #ffffff; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 34: 
</pre>
<pre style="background-color: #fbfbfb; margin: 0em; width: 100%; font-family: consolas,'Courier new',courier,monospace; font-size: 12px">

 35: <span style="color: #0000ff">?&gt;</span>
</pre>

<p>很方便。。</p>
<p>但是也有烦人的是，对于一些收录比较少的网站来说，会无法加密，返回&ldquo;网址可能存在风险&rdquo;的错误。</p>
<p>很坑爹。</p>
<p>建议试好再用。。</p>
<p>如果实在不行的话，可以选择使用其他接口。敬请关注本博下篇博文讲述的新浪短链接口。</p>
<p>本文发表自 <a href="http://post.zz173.com/detail/baidu-short-url-interfaces-and-research.html">http://post.zz173.com/detail/baidu-short-url-interfaces-and-research.html</a> 未经本人同意，禁止转载。</p>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars1.githubusercontent.com/u/7907969"
               alt="落月" />
          <p class="site-author-name" itemprop="name">落月</p>
          <p class="site-description motion-element" itemprop="description">不知乘月几人归，落月摇情满江树。</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives/index.html">
              <span class="site-state-item-count">62</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">10</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2007 - 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">落月</span>
</div>

        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv"><i class="fa fa-user"></i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span></span>
  

  
    <span class="site-pv"><i class="fa fa-eye"></i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"blogx"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
      
      <script src="/vendors/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
      <script src="/js/src/hook-duoshuo.js"></script>
    
  





  
  
  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length == 0) {
       search_path = "search.xml";
    }
    var path = "/" + search_path;
    // monitor main search box;

    function proceedsearch() {
      $("body").append('<div class="popoverlay">').css('overflow', 'hidden');
      $('.popup').toggle();

    }
    // search function;
    var searchFunc = function(path, search_id, content_id) {
    'use strict';
    $.ajax({
        url: path,
        dataType: "xml",
        async: true,
        success: function( xmlResponse ) {
            // get the contents from search data
            isfetched = true;
            $('.popup').detach().appendTo('.header-inner');
            var datas = $( "entry", xmlResponse ).map(function() {
                return {
                    title: $( "title", this ).text(),
                    content: $("content",this).text(),
                    url: $( "url" , this).text()
                };
            }).get();
            var $input = document.getElementById(search_id);
            var $resultContent = document.getElementById(content_id);
            $input.addEventListener('input', function(){
                var matchcounts = 0;
                var str='<ul class=\"search-result-list\">';                
                var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                $resultContent.innerHTML = "";
                if (this.value.trim().length > 1) {
                // perform local searching
                datas.forEach(function(data) {
                    var isMatch = true;
                    var content_index = [];
                    var data_title = data.title.trim().toLowerCase();
                    var data_content = data.content.trim().replace(/<[^>]+>/g,"").toLowerCase();
                    var data_url = data.url;
                    var index_title = -1;
                    var index_content = -1;
                    var first_occur = -1;
                    // only match artiles with not empty titles and contents
                    if(data_title != '' && data_content != '') {
                        keywords.forEach(function(keyword, i) {
                            index_title = data_title.indexOf(keyword);
                            index_content = data_content.indexOf(keyword);
                            if( index_title < 0 && index_content < 0 ){
                                isMatch = false;
                            } else {
                                if (index_content < 0) {
                                    index_content = 0;
                                }
                                if (i == 0) {
                                    first_occur = index_content;
                                }
                            }
                        });
                    }
                    // show search results
                    if (isMatch) {
                        matchcounts += 1;
                        str += "<li><a href='"+ data_url +"' class='search-result-title'>"+ data_title +"</a>";
                        var content = data.content.trim().replace(/<[^>]+>/g,"");
                        if (first_occur >= 0) {
                            // cut out 100 characters
                            var start = first_occur - 20;
                            var end = first_occur + 80;
                            if(start < 0){
                                start = 0;
                            }
                            if(start == 0){
                                end = 50;
                            }
                            if(end > content.length){
                                end = content.length;
                            }
                            var match_content = content.substring(start, end);
                            // highlight all keywords
                            keywords.forEach(function(keyword){
                                var regS = new RegExp(keyword, "gi");
                                match_content = match_content.replace(regS, "<b class=\"search-keyword\">"+keyword+"</b>");
                            });
                            
                            str += "<p class=\"search-result\">" + match_content +"...</p>"
                        }
                        str += "</li>";
                    }
                })};
                str += "</ul>";
                if (matchcounts == 0) { str = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>' }
                if (keywords == "") { str = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>' }
                $resultContent.innerHTML = str;
            });
            proceedsearch();
        }
    });}

    // handle and trigger popup window;
    $('.popup-trigger').mousedown(function(e) {
      e.stopPropagation();
      if (isfetched == false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };

    });

    $('.popup-btn-close').click(function(e){
      $('.popup').hide();
      $(".popoverlay").remove();
      $('body').css('overflow', '');
    });
    $('.popup').click(function(e){
      e.stopPropagation();
    });
  </script>

  

  

  

</body>
</html>
